<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Day 6: Array Rearrangement Problems</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-dark: #0a0e27;
      --bg-card: #1a1f3a;
      --accent-blue: #3b82f6;
      --accent-green: #10b981;
      --accent-orange: #f59e0b;
      --accent-purple: #8b5cf6;
      --accent-red: #ef4444;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --border: rgba(255, 255, 255, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      line-height: 1.6;
      font-size: 14px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    /* Header */
    .header {
      text-align: center;
      padding: 40px 30px;
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      border-radius: 16px;
      margin-bottom: 40px;
      border: 1px solid var(--border);
    }

    .day-badge {
      display: inline-block;
      background: var(--accent-blue);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .header h1 {
      font-size: 2.2rem;
      margin-bottom: 10px;
      color: var(--text-primary);
      font-weight: 800;
    }

    .header .subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
    }

    /* Tab Navigation */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 2px solid var(--border);
      overflow-x: auto;
      padding-bottom: 2px;
    }

    .tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
      white-space: nowrap;
      font-family: 'Inter', sans-serif;
    }

    .tab:hover {
      color: var(--text-primary);
    }

    .tab.active {
      color: var(--accent-blue);
      border-bottom-color: var(--accent-blue);
    }

    /* Tab Content */
    .tab-content {
      display: none;
      animation: fadeIn 0.4s ease-out;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Section */
    .section {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 25px;
      border: 1px solid var(--border);
    }

    .section-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--accent-blue);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    /* Concept Cards */
    .concept-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 25px 0;
    }

    .concept-card {
      background: rgba(59, 130, 246, 0.05);
      border: 1px solid rgba(59, 130, 246, 0.2);
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid var(--accent-blue);
    }

    .concept-card h3 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--accent-blue);
    }

    .concept-card p {
      color: var(--text-secondary);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    /* Animation Container */
    .animation-container {
      background: #0f172a;
      border-radius: 12px;
      padding: 30px;
      margin: 25px 0;
      border: 1px solid var(--border);
    }

    .animation-title {
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 25px;
      color: var(--text-secondary);
    }

    .array-display {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .array-item {
      width: 60px;
      height: 60px;
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 700;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .array-item .index {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background: var(--accent-blue);
      color: white;
      border-radius: 50%;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .array-item.zero {
      background: rgba(239, 68, 68, 0.2);
      border-color: var(--accent-red);
      color: var(--accent-red);
    }

    .array-item.one {
      background: rgba(16, 185, 129, 0.2);
      border-color: var(--accent-green);
      color: var(--accent-green);
    }

    .array-item.positive {
      background: rgba(16, 185, 129, 0.2);
      border-color: var(--accent-green);
      color: var(--accent-green);
    }

    .array-item.negative {
      background: rgba(239, 68, 68, 0.2);
      border-color: var(--accent-red);
      color: var(--accent-red);
    }

    .array-item.active {
      border-color: var(--accent-orange);
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
      transform: translateY(-8px) scale(1.1);
    }

    .array-item.pointer-left {
      border-color: var(--accent-blue);
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    }

    .array-item.pointer-right {
      border-color: var(--accent-purple);
      box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
    }

    .array-item.write-pos {
      border-color: var(--accent-green);
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
    }

    .array-item .pointer-label {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 4px;
      white-space: nowrap;
    }

    .pointer-label.left-ptr {
      background: var(--accent-blue);
      color: white;
    }

    .pointer-label.right-ptr {
      background: var(--accent-purple);
      color: white;
    }

    .pointer-label.write-ptr {
      background: var(--accent-green);
      color: white;
    }

    .array-item.moving {
      animation: moveItem 0.8s ease-in-out;
    }

    @keyframes moveItem {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 20px;
      align-items: center;
      margin: 30px 0;
    }

    .comparison-label {
      text-align: center;
      padding: 10px;
      background: var(--bg-card);
      border-radius: 8px;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .arrow {
      font-size: 2rem;
      color: var(--accent-green);
    }

    /* Controls */
    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 25px;
      flex-wrap: wrap;
      align-items: center;
    }

    .step-controls {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .step-info {
      background: var(--bg-card);
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 600;
      border: 1px solid var(--border);
    }

    .speed-control {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--bg-card);
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid var(--border);
    }

    .speed-control label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      font-weight: 600;
    }

    .speed-control select {
      background: #0f172a;
      color: var(--text-primary);
      border: 1px solid var(--border);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.85rem;
      cursor: pointer;
      font-family: 'Inter', sans-serif;
    }

    .speed-control select:focus {
      outline: none;
      border-color: var(--accent-blue);
    }

    .btn.playing {
      background: var(--accent-red);
    }

    .btn.playing:hover {
      background: #dc2626;
    }

    .btn {
      padding: 10px 24px;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Inter', sans-serif;
    }

    .btn-primary {
      background: var(--accent-blue);
      color: white;
    }

    .btn-primary:hover {
      background: #2563eb;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: var(--bg-card);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      border-color: var(--accent-blue);
    }

    .btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* Code Block */
    .code-block {
      background: #0f172a;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      overflow-x: auto;
    }

    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }

    .code-title {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 600;
    }

    .complexity {
      font-size: 0.85rem;
      color: var(--accent-green);
      font-family: 'Fira Code', monospace;
    }

    pre {
      font-family: 'Fira Code', monospace;
      font-size: 0.85rem;
      line-height: 1.6;
      color: var(--text-primary);
    }

    .keyword { color: #ff79c6; }
    .function { color: #50fa7b; }
    .variable { color: #8be9fd; }
    .number { color: #bd93f9; }
    .comment { color: #6272a4; font-style: italic; }

    /* Step Box */
    .step-box {
      background: rgba(59, 130, 246, 0.05);
      border-left: 4px solid var(--accent-blue);
      padding: 18px 22px;
      margin: 15px 0;
      border-radius: 8px;
    }

    .step-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }

    .step-number {
      width: 28px;
      height: 28px;
      background: var(--accent-blue);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    .step-title {
      font-size: 1rem;
      font-weight: 600;
    }

    .step-content {
      margin-left: 40px;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .step-content code {
      background: rgba(59, 130, 246, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      color: var(--accent-blue);
    }

    /* Status Message */
    .status-message {
      text-align: center;
      padding: 15px;
      background: rgba(59, 130, 246, 0.1);
      border-radius: 8px;
      margin: 20px 0;
      font-size: 0.95rem;
      color: var(--text-secondary);
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .status-message.success {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--accent-green);
      color: var(--accent-green);
    }

    /* Input Controls */
    .input-group {
      display: flex;
      gap: 10px;
      align-items: center;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .input-group label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 600;
    }

    .input-group input {
      padding: 8px 15px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text-primary);
      font-size: 0.9rem;
      font-family: 'Fira Code', monospace;
      width: 200px;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--accent-blue);
    }

    /* Key Points */
    .key-points {
      background: rgba(139, 92, 246, 0.05);
      border: 1px solid rgba(139, 92, 246, 0.2);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    .key-points h3 {
      font-size: 1.1rem;
      color: var(--accent-purple);
      margin-bottom: 12px;
    }

    .key-points ul {
      margin-left: 20px;
      color: var(--text-secondary);
    }

    .key-points li {
      margin-bottom: 8px;
      line-height: 1.6;
    }

    /* Approach Comparison */
    .approach-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .approach-card {
      background: rgba(59, 130, 246, 0.05);
      border: 1px solid var(--border);
      padding: 18px;
      border-radius: 8px;
      border-top: 3px solid var(--accent-blue);
    }

    .approach-card h4 {
      font-size: 1rem;
      margin-bottom: 10px;
      color: var(--accent-blue);
    }

    .approach-card p {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 10px;
    }

    .complexity-badge {
      display: inline-block;
      padding: 4px 10px;
      background: rgba(16, 185, 129, 0.1);
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--accent-green);
      font-family: 'Fira Code', monospace;
    }

    /* Complexity Analysis */
    .complexity-panel {
      background: rgba(139, 92, 246, 0.05);
      border: 2px solid rgba(139, 92, 246, 0.3);
      border-radius: 10px;
      padding: 20px;
      margin: 25px 0;
    }

    .complexity-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent-purple);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .complexity-tracker {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .complexity-metric {
      background: var(--bg-card);
      padding: 15px;
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .metric-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .metric-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--accent-purple);
      font-family: 'Fira Code', monospace;
    }

    .metric-description {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 6px;
      line-height: 1.4;
    }

    .operation-counter {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid var(--accent-blue);
      padding: 12px;
      border-radius: 6px;
      margin: 10px 0;
      font-family: 'Fira Code', monospace;
    }

    .operation-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      font-size: 0.9rem;
    }

    .operation-name {
      color: var(--text-secondary);
    }

    .operation-count {
      color: var(--accent-blue);
      font-weight: 700;
      font-size: 1.1rem;
    }

    .complexity-formula {
      background: #0f172a;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid var(--accent-purple);
      margin: 15px 0;
    }

    .formula-step {
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      color: var(--accent-purple);
      margin: 8px 0;
      padding: 6px 10px;
      background: rgba(139, 92, 246, 0.05);
      border-radius: 4px;
    }

    .formula-step .equals {
      color: var(--text-secondary);
      margin: 0 8px;
    }

    .final-complexity {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(139, 92, 246, 0.1));
      border: 2px solid var(--accent-green);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-top: 20px;
    }

    .final-complexity-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .final-complexity-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-green);
      font-family: 'Fira Code', monospace;
    }

    .space-viz {
      display: flex;
      gap: 10px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .space-item {
      background: var(--bg-card);
      border: 2px solid var(--accent-orange);
      padding: 10px 15px;
      border-radius: 6px;
      font-family: 'Fira Code', monospace;
      font-size: 0.9rem;
      color: var(--accent-orange);
      animation: spaceAllocate 0.5s ease-out;
    }

    @keyframes spaceAllocate {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8rem;
      }

      .section {
        padding: 20px;
      }

      .comparison {
        grid-template-columns: 1fr;
      }

      .arrow {
        transform: rotate(90deg);
      }

      .array-item {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="day-badge">Day 6</div>
      <h1>Array Rearrangement Problems</h1>
      <p class="subtitle">Master techniques for moving, segregating, and rotating array elements</p>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" onclick="switchTab(0)">üìö Concepts</button>
      <button class="tab" onclick="switchTab(1)">üîÑ Move Zeros</button>
      <button class="tab" onclick="switchTab(2)">‚ö´‚ö™ Segregate 0s/1s</button>
      <button class="tab" onclick="switchTab(3)">üîÅ Rotate Array</button>
      <button class="tab" onclick="switchTab(4)">üí° Summary</button>
    </div>

    <!-- Tab 0: Concepts -->
    <div class="tab-content active" id="tab-0">
      <div class="section">
        <h2 class="section-title">
          <span>üìö</span> Core Concepts
        </h2>
        <p class="section-subtitle">
          Array rearrangement involves modifying the order of elements while maintaining specific constraints.
        </p>

        <div class="concept-grid">
          <div class="concept-card">
            <h3>üéØ Two-Pointer Technique</h3>
            <p>
              Use two pointers to swap or move elements. One pointer tracks position to place elements, 
              another scans through the array.
            </p>
          </div>

          <div class="concept-card">
            <h3>üîÑ In-Place Modification</h3>
            <p>
              Rearrange elements without using extra space (except variables). 
              Modify the original array directly for O(1) space complexity.
            </p>
          </div>

          <div class="concept-card">
            <h3>‚ö° Order Preservation</h3>
            <p>
              Sometimes we need to maintain relative order of elements (stable rearrangement). 
              This affects our approach choice.
            </p>
          </div>

          <div class="concept-card">
            <h3>üé® Segregation Pattern</h3>
            <p>
              Separate elements into groups (0s vs 1s, negative vs positive) by moving them 
              to different sections of the array.
            </p>
          </div>
        </div>

        <div class="key-points">
          <h3>üîë Key Patterns to Remember</h3>
          <ul>
            <li><strong>Move elements to end:</strong> Two-pointer with write position</li>
            <li><strong>Segregate into groups:</strong> Two-pointer or partition technique</li>
            <li><strong>Rotate array:</strong> Reverse sections or use extra space</li>
            <li><strong>Maintain order:</strong> May need modified approach or extra space</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Tab 1: Move Zeros -->
    <div class="tab-content" id="tab-1">
      <div class="section">
        <h2 class="section-title">
          <span>üîÑ</span> Move All Zeros to End
        </h2>
        <p class="section-subtitle">
          Move all zeros to the end while maintaining the order of non-zero elements.
        </p>

        <div class="animation-container">
          <div class="animation-title">Interactive Visualization</div>
          
          <div class="input-group">
            <label>Custom Array:</label>
            <input type="text" id="zerosInput" value="0,1,0,3,12" placeholder="e.g., 0,1,0,3,12">
            <button class="btn btn-secondary" onclick="setCustomArray1()">Set Array</button>
          </div>

          <div class="comparison">
            <div>
              <div class="comparison-label">Original Array</div>
              <div class="array-display" id="beforeZeros"></div>
            </div>
            <div class="arrow">‚Üí</div>
            <div>
              <div class="comparison-label">Current State</div>
              <div class="array-display" id="afterZeros"></div>
            </div>
          </div>

          <div class="status-message" id="statusZeros">
            Click "Next Step" to see step-by-step animation
          </div>

          <div class="controls">
            <button class="btn btn-primary" id="playZeros" onclick="togglePlayZeros()">‚ñ∂Ô∏è Start Auto</button>
            <button class="btn btn-secondary" id="prevZeros" onclick="prevStepZeros()">‚Üê Previous</button>
            <button class="btn btn-secondary" id="nextZeros" onclick="nextStepZeros()">Next Step ‚Üí</button>
            <button class="btn btn-secondary" onclick="resetMoveZeros()">üîÑ Reset</button>
            <div class="speed-control">
              <label>Speed:</label>
              <select id="speedZeros" onchange="updateSpeedZeros()">
                <option value="2000">Slow</option>
                <option value="1000" selected>Normal</option>
                <option value="500">Fast</option>
              </select>
            </div>
            <div class="step-info" id="stepInfoZeros">Step 1</div>
          </div>
        </div>

        <h3 style="margin: 30px 0 15px; font-size: 1.2rem; color: var(--accent-blue);">üìù Approach</h3>
        <div class="step-box">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">Use Two Pointers</div>
          </div>
          <div class="step-content">
            Maintain a <code>writePos</code> pointer for where to place next non-zero element. 
            Start at index 0.
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">Scan Through Array</div>
          </div>
          <div class="step-content">
            Use another pointer to scan each element. When you find a non-zero element, 
            place it at <code>writePos</code> and increment <code>writePos</code>.
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">Fill Remaining with Zeros</div>
          </div>
          <div class="step-content">
            After processing all elements, fill positions from <code>writePos</code> to end with zeros.
          </div>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-title">Python Solution</span>
            <span class="complexity">Time: O(n) | Space: O(1)</span>
          </div>
          <pre><span class="keyword">def</span> <span class="function">moveZeroes</span>(nums):
    <span class="comment"># Pointer for non-zero elements</span>
    writePos = <span class="number">0</span>
    
    <span class="comment"># Move all non-zero elements to front</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="function">len</span>(nums)):
        <span class="keyword">if</span> nums[i] != <span class="number">0</span>:
            nums[writePos] = nums[i]
            writePos += <span class="number">1</span>
    
    <span class="comment"># Fill remaining positions with zeros</span>
    <span class="keyword">while</span> writePos < <span class="function">len</span>(nums):
        nums[writePos] = <span class="number">0</span>
        writePos += <span class="number">1</span>
    
    <span class="keyword">return</span> nums</pre>
        </div>

        <div class="key-points">
          <h3>üí° Key Insights</h3>
          <ul>
            <li>Order of non-zero elements is preserved (stable rearrangement)</li>
            <li>In-place algorithm using O(1) extra space</li>
            <li>Single pass through array = O(n) time</li>
            <li>Can optimize with swap approach to avoid second loop</li>
          </ul>
        </div>

        <!-- Complexity Analysis -->
        <div class="complexity-panel">
          <h3 class="complexity-title">
            <span>üìä</span> Complexity Analysis (Live Tracking)
          </h3>
          
          <div class="complexity-tracker">
            <div class="complexity-metric">
              <div class="metric-label">Array Size (n)</div>
              <div class="metric-value" id="zerosN">5</div>
              <div class="metric-description">Total elements in array</div>
            </div>
            
            <div class="complexity-metric">
              <div class="metric-label">Operations Count</div>
              <div class="metric-value" id="zerosOps">0</div>
              <div class="metric-description">Total comparisons + assignments</div>
            </div>
            
            <div class="complexity-metric">
              <div class="metric-label">Space Used</div>
              <div class="metric-value" id="zerosSpace">2</div>
              <div class="metric-description">Variables: writePos, i</div>
            </div>
          </div>

          <div class="operation-counter">
            <div class="operation-row">
              <span class="operation-name">Array access operations:</span>
              <span class="operation-count" id="zerosArrayAccess">0</span>
            </div>
            <div class="operation-row">
              <span class="operation-name">Comparisons:</span>
              <span class="operation-count" id="zerosComparisons">0</span>
            </div>
            <div class="operation-row">
              <span class="operation-name">Assignments:</span>
              <span class="operation-count" id="zerosAssignments">0</span>
            </div>
          </div>

          <div class="complexity-formula">
            <div style="color: var(--text-secondary); margin-bottom: 12px; font-size: 0.95rem;">
              <strong>Time Complexity Calculation:</strong>
            </div>
            <div class="formula-step">
              First loop: Scan all n elements <span class="equals">=</span> O(n)
            </div>
            <div class="formula-step">
              Second loop: Fill remaining zeros <span class="equals">=</span> O(n) worst case
            </div>
            <div class="formula-step">
              Total <span class="equals">=</span> O(n) + O(n) <span class="equals">=</span> <strong>O(n)</strong>
            </div>
          </div>

          <div class="final-complexity">
            <div class="final-complexity-label">Final Complexity</div>
            <div class="final-complexity-value">Time: O(n) | Space: O(1)</div>
          </div>

          <div class="space-viz" id="zerosSpaceViz">
            <div class="space-item">writePos</div>
            <div class="space-item">i (loop var)</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 2: Segregate 0s and 1s -->
    <div class="tab-content" id="tab-2">
      <div class="section">
        <h2 class="section-title">
          <span>‚ö´‚ö™</span> Segregate 0s and 1s
        </h2>
        <p class="section-subtitle">
          Arrange array so all 0s come before all 1s. Order within groups doesn't matter.
        </p>

        <div class="animation-container">
          <div class="animation-title">Interactive Visualization</div>
          
          <div class="input-group">
            <label>Custom Array:</label>
            <input type="text" id="segregateInput" value="0,1,1,0,1,0,0,1" placeholder="e.g., 0,1,1,0,1">
            <button class="btn btn-secondary" onclick="setCustomArray2()">Set Array</button>
          </div>

          <div class="comparison">
            <div>
              <div class="comparison-label">Original Array</div>
              <div class="array-display" id="beforeSegregate"></div>
            </div>
            <div class="arrow">‚Üí</div>
            <div>
              <div class="comparison-label">Current State</div>
              <div class="array-display" id="afterSegregate"></div>
            </div>
          </div>

          <div class="status-message" id="statusSegregate">
            Click "Next Step" to see two-pointer segregation step by step
          </div>

          <div class="controls">
            <button class="btn btn-primary" id="playSegregate" onclick="togglePlaySegregate()">‚ñ∂Ô∏è Start Auto</button>
            <button class="btn btn-secondary" id="prevSegregate" onclick="prevStepSegregate()">‚Üê Previous</button>
            <button class="btn btn-secondary" id="nextSegregate" onclick="nextStepSegregate()">Next Step ‚Üí</button>
            <button class="btn btn-secondary" onclick="resetSegregate()">üîÑ Reset</button>
            <div class="speed-control">
              <label>Speed:</label>
              <select id="speedSegregate" onchange="updateSpeedSegregate()">
                <option value="2000">Slow</option>
                <option value="1000" selected>Normal</option>
                <option value="500">Fast</option>
              </select>
            </div>
            <div class="step-info" id="stepInfoSegregate">Step 1</div>
          </div>
        </div>

        <h3 style="margin: 30px 0 15px; font-size: 1.2rem; color: var(--accent-blue);">üìù Approach</h3>
        <div class="step-box">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">Two-Pointer Setup</div>
          </div>
          <div class="step-content">
            Start with <code>left = 0</code> and <code>right = n-1</code>. 
            Left pointer finds 1s, right pointer finds 0s.
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">Find Elements to Swap</div>
          </div>
          <div class="step-content">
            Move <code>left</code> forward until you find a 1. 
            Move <code>right</code> backward until you find a 0.
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">Swap and Continue</div>
          </div>
          <div class="step-content">
            If <code>left < right</code>, swap elements at left and right. 
            Repeat until pointers meet.
          </div>
        </div>

        <div class="approach-grid">
          <div class="approach-card">
            <h4>Two-Pointer Approach</h4>
            <p>Swap 0s and 1s from opposite ends</p>
            <div class="complexity-badge">Time: O(n)</div>
            <div class="complexity-badge">Space: O(1)</div>
          </div>

          <div class="approach-card">
            <h4>Counting Approach</h4>
            <p>Count zeros, fill array with 0s then 1s</p>
            <div class="complexity-badge">Time: O(n)</div>
            <div class="complexity-badge">Space: O(1)</div>
          </div>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-title">Python Solution (Two-Pointer)</span>
            <span class="complexity">Time: O(n) | Space: O(1)</span>
          </div>
          <pre><span class="keyword">def</span> <span class="function">segregate0and1</span>(arr):
    left, right = <span class="number">0</span>, <span class="function">len</span>(arr) - <span class="number">1</span>
    
    <span class="keyword">while</span> left < right:
        <span class="comment"># Move left pointer to find 1</span>
        <span class="keyword">while</span> arr[left] == <span class="number">0</span> <span class="keyword">and</span> left < right:
            left += <span class="number">1</span>
        
        <span class="comment"># Move right pointer to find 0</span>
        <span class="keyword">while</span> arr[right] == <span class="number">1</span> <span class="keyword">and</span> left < right:
            right -= <span class="number">1</span>
        
        <span class="comment"># Swap if needed</span>
        <span class="keyword">if</span> left < right:
            arr[left], arr[right] = arr[right], arr[left]
            left += <span class="number">1</span>
            right -= <span class="number">1</span>
    
    <span class="keyword">return</span> arr</pre>
        </div>

        <!-- Complexity Analysis -->
        <div class="complexity-panel">
          <h3 class="complexity-title">
            <span>üìä</span> Complexity Analysis (Live Tracking)
          </h3>
          
          <div class="complexity-tracker">
            <div class="complexity-metric">
              <div class="metric-label">Array Size (n)</div>
              <div class="metric-value" id="segregateN">8</div>
              <div class="metric-description">Total elements</div>
            </div>
            
            <div class="complexity-metric">
              <div class="metric-label">Pointer Moves</div>
              <div class="metric-value" id="segregateMoves">0</div>
              <div class="metric-description">Left + Right movements</div>
            </div>
            
            <div class="complexity-metric">
              <div class="metric-label">Swaps Made</div>
              <div class="metric-value" id="segregateSwaps">0</div>
              <div class="metric-description">Total element swaps</div>
            </div>
          </div>

          <div class="operation-counter">
            <div class="operation-row">
              <span class="operation-name">Left pointer movements:</span>
              <span class="operation-count" id="segregateLeftMoves">0</span>
            </div>
            <div class="operation-row">
              <span class="operation-name">Right pointer movements:</span>
              <span class="operation-count" id="segregateRightMoves">0</span>
            </div>
            <div class="operation-row">
              <span class="operation-name">Total comparisons:</span>
              <span class="operation-count" id="segregateComparisons">0</span>
            </div>
          </div>

          <div class="complexity-formula">
            <div style="color: var(--text-secondary); margin-bottom: 12px; font-size: 0.95rem;">
              <strong>Time Complexity Calculation:</strong>
            </div>
            <div class="formula-step">
              Left pointer traverses from 0 ‚Üí n <span class="equals">=</span> O(n)
            </div>
            <div class="formula-step">
              Right pointer traverses from n ‚Üí 0 <span class="equals">=</span> O(n)
            </div>
            <div class="formula-step">
              Each element visited at most once by each pointer
            </div>
            <div class="formula-step">
              Total <span class="equals">=</span> O(n) + O(n) <span class="equals">=</span> <strong>O(n)</strong>
            </div>
          </div>

          <div class="final-complexity">
            <div class="final-complexity-label">Final Complexity</div>
            <div class="final-complexity-value">Time: O(n) | Space: O(1)</div>
          </div>

          <div class="space-viz">
            <div class="space-item">left (pointer)</div>
            <div class="space-item">right (pointer)</div>
            <div class="space-item">temp (for swap)</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 3: Rotate Array -->
    <div class="tab-content" id="tab-3">
      <div class="section">
        <h2 class="section-title">
          <span>üîÅ</span> Rotate Array by K Positions
        </h2>
        <p class="section-subtitle">
          Rotate array elements to the right by k positions.
        </p>

        <div class="animation-container">
          <div class="animation-title">Interactive Visualization</div>
          
          <div class="input-group">
            <label>Array:</label>
            <input type="text" id="rotateInput" value="1,2,3,4,5,6,7" placeholder="e.g., 1,2,3,4,5">
            <label>K:</label>
            <input type="number" id="kInput" value="3" min="0" max="10" style="width: 80px;">
            <button class="btn btn-secondary" onclick="setCustomArray3()">Set</button>
          </div>

          <div class="comparison">
            <div>
              <div class="comparison-label">Original (k=<span id="kDisplay">3</span>)</div>
              <div class="array-display" id="beforeRotate"></div>
            </div>
            <div class="arrow">‚Üí</div>
            <div>
              <div class="comparison-label">Current State</div>
              <div class="array-display" id="afterRotate"></div>
            </div>
          </div>

          <div class="status-message" id="statusRotate">
            Click "Next Step" to see rotation step by step
          </div>

          <div class="controls">
            <button class="btn btn-primary" id="playRotate" onclick="togglePlayRotate()">‚ñ∂Ô∏è Start Auto</button>
            <button class="btn btn-secondary" id="prevRotate" onclick="prevStepRotate()">‚Üê Previous</button>
            <button class="btn btn-secondary" id="nextRotate" onclick="nextStepRotate()">Next Step ‚Üí</button>
            <button class="btn btn-secondary" onclick="resetRotate()">üîÑ Reset</button>
            <div class="speed-control">
              <label>Speed:</label>
              <select id="speedRotate" onchange="updateSpeedRotate()">
                <option value="2000">Slow</option>
                <option value="1000" selected>Normal</option>
                <option value="500">Fast</option>
              </select>
            </div>
            <div class="step-info" id="stepInfoRotate">Step 1</div>
          </div>
        </div>

        <h3 style="margin: 30px 0 15px; font-size: 1.2rem; color: var(--accent-blue);">üìù Approaches</h3>
        
        <div class="approach-grid">
          <div class="approach-card">
            <h4>‚úÖ Reverse Method (Optimal)</h4>
            <p>Reverse entire array, then reverse first k, then reverse remaining</p>
            <div class="complexity-badge">Time: O(n)</div>
            <div class="complexity-badge">Space: O(1)</div>
          </div>

          <div class="approach-card">
            <h4>Extra Array Method</h4>
            <p>Copy to new array with rotated positions</p>
            <div class="complexity-badge">Time: O(n)</div>
            <div class="complexity-badge">Space: O(n)</div>
          </div>

          <div class="approach-card">
            <h4>Element-by-Element</h4>
            <p>Rotate one position k times</p>
            <div class="complexity-badge">Time: O(n√ók)</div>
            <div class="complexity-badge">Space: O(1)</div>
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">Normalize K</div>
          </div>
          <div class="step-content">
            If k > array length, use <code>k = k % n</code> (rotating n times = no change)
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">Reverse Entire Array</div>
          </div>
          <div class="step-content">
            Reverse all elements: [1,2,3,4,5,6,7] ‚Üí [7,6,5,4,3,2,1]
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">Reverse First K Elements</div>
          </div>
          <div class="step-content">
            Reverse first k elements: [7,6,5,4,3,2,1] ‚Üí [5,6,7,4,3,2,1] (if k=3)
          </div>
        </div>

        <div class="step-box">
          <div class="step-header">
            <div class="step-number">4</div>
            <div class="step-title">Reverse Remaining Elements</div>
          </div>
          <div class="step-content">
            Reverse from k to end: [5,6,7,4,3,2,1] ‚Üí [5,6,7,1,2,3,4] ‚úì
          </div>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-title">Python Solution (Reverse Method)</span>
            <span class="complexity">Time: O(n) | Space: O(1)</span>
          </div>
          <pre><span class="keyword">def</span> <span class="function">rotate</span>(nums, k):
    n = <span class="function">len</span>(nums)
    k = k % n  <span class="comment"># Handle k > n</span>
    
    <span class="comment"># Helper function to reverse a section</span>
    <span class="keyword">def</span> <span class="function">reverse</span>(start, end):
        <span class="keyword">while</span> start < end:
            nums[start], nums[end] = nums[end], nums[start]
            start += <span class="number">1</span>
            end -= <span class="number">1</span>
    
    <span class="comment"># Step 1: Reverse entire array</span>
    <span class="function">reverse</span>(<span class="number">0</span>, n - <span class="number">1</span>)
    
    <span class="comment"># Step 2: Reverse first k elements</span>
    <span class="function">reverse</span>(<span class="number">0</span>, k - <span class="number">1</span>)
    
    <span class="comment"># Step 3: Reverse remaining elements</span>
    <span class="function">reverse</span>(k, n - <span class="number">1</span>)
    
    <span class="keyword">return</span> nums</pre>
        </div>

        <div class="key-points">
          <h3>üí° Why Reverse Method Works</h3>
          <ul>
            <li>Rotating right by k = moving last k elements to front</li>
            <li>Three reverses achieve this without extra space</li>
            <li>Each reverse is O(n/2) = O(n) total</li>
            <li>Example: [1,2,3,4,5] rotate 2 ‚Üí [4,5,1,2,3]</li>
          </ul>
        </div>

        <!-- Complexity Analysis -->
        <div class="complexity-panel">
          <h3 class="complexity-title">
            <span>üìä</span> Complexity Analysis (Live Tracking)
          </h3>
          
          <div class="complexity-tracker">
            <div class="complexity-metric">
              <div class="metric-label">Array Size (n)</div>
              <div class="metric-value" id="rotateN">7</div>
              <div class="metric-description">Total elements</div>
            </div>
            
            <div class="complexity-metric">
              <div class="metric-label">Rotation Amount (k)</div>
              <div class="metric-value" id="rotateK">3</div>
              <div class="metric-description">Positions to rotate</div>
            </div>
            
            <div class="complexity-metric">
              <div class="metric-label">Total Swaps</div>
              <div class="metric-value" id="rotateSwaps">0</div>
              <div class="metric-description">Swaps across 3 reverses</div>
            </div>
          </div>

          <div class="operation-counter">
            <div class="operation-row">
              <span class="operation-name">Reverse entire (n elements):</span>
              <span class="operation-count">~n/2 swaps</span>
            </div>
            <div class="operation-row">
              <span class="operation-name">Reverse first k:</span>
              <span class="operation-count">~k/2 swaps</span>
            </div>
            <div class="operation-row">
              <span class="operation-name">Reverse remaining (n-k):</span>
              <span class="operation-count">~(n-k)/2 swaps</span>
            </div>
          </div>

          <div class="complexity-formula">
            <div style="color: var(--text-secondary); margin-bottom: 12px; font-size: 0.95rem;">
              <strong>Time Complexity Calculation:</strong>
            </div>
            <div class="formula-step">
              Reverse all <span class="equals">=</span> O(n/2) <span class="equals">=</span> O(n)
            </div>
            <div class="formula-step">
              Reverse first k <span class="equals">=</span> O(k/2) <span class="equals">=</span> O(k)
            </div>
            <div class="formula-step">
              Reverse rest <span class="equals">=</span> O((n-k)/2) <span class="equals">=</span> O(n-k)
            </div>
            <div class="formula-step">
              Total <span class="equals">=</span> O(n) + O(k) + O(n-k) <span class="equals">=</span> <strong>O(n)</strong>
            </div>
          </div>

          <div class="final-complexity">
            <div class="final-complexity-label">Final Complexity</div>
            <div class="final-complexity-value">Time: O(n) | Space: O(1)</div>
          </div>

          <div class="space-viz">
            <div class="space-item">k (constant)</div>
            <div class="space-item">temp vars (swapping)</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 4: Summary -->
    <div class="tab-content" id="tab-4">
      <div class="section">
        <h2 class="section-title">
          <span>üìä</span> Summary & Comparison
        </h2>

        <table style="width: 100%; border-collapse: collapse; margin: 25px 0;">
          <thead>
            <tr style="background: rgba(59, 130, 246, 0.1);">
              <th style="padding: 15px; text-align: left; color: var(--accent-blue);">Problem</th>
              <th style="padding: 15px; text-align: left; color: var(--accent-blue);">Technique</th>
              <th style="padding: 15px; text-align: left; color: var(--accent-blue);">Time</th>
              <th style="padding: 15px; text-align: left; color: var(--accent-blue);">Space</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--border);">
              <td style="padding: 15px;">Move Zeros</td>
              <td style="padding: 15px; color: var(--text-secondary);">Two-pointer (write position)</td>
              <td style="padding: 15px; color: var(--accent-green);">O(n)</td>
              <td style="padding: 15px; color: var(--accent-green);">O(1)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border);">
              <td style="padding: 15px;">Segregate 0s/1s</td>
              <td style="padding: 15px; color: var(--text-secondary);">Two-pointer (both ends)</td>
              <td style="padding: 15px; color: var(--accent-green);">O(n)</td>
              <td style="padding: 15px; color: var(--accent-green);">O(1)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border);">
              <td style="padding: 15px;">Rotate Array</td>
              <td style="padding: 15px; color: var(--text-secondary);">Triple reverse</td>
              <td style="padding: 15px; color: var(--accent-green);">O(n)</td>
              <td style="padding: 15px; color: var(--accent-green);">O(1)</td>
            </tr>
          </tbody>
        </table>

        <div class="key-points">
          <h3>üéØ Common Patterns Across All Problems</h3>
          <ul>
            <li><strong>In-place modification:</strong> All use O(1) extra space</li>
            <li><strong>Two-pointer technique:</strong> Core pattern for rearrangement</li>
            <li><strong>Single/double pass:</strong> Optimal O(n) time complexity</li>
            <li><strong>Maintain stability:</strong> Some preserve order, others don't need to</li>
          </ul>
        </div>

        <div class="section" style="margin-top: 30px;">
          <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: var(--accent-purple);">üéì When to Use Each Technique</h3>
          
          <div class="step-box" style="border-left-color: var(--accent-green);">
            <div class="step-header">
              <div class="step-number" style="background: var(--accent-green);">üìù</div>
              <div class="step-title">Write-Position Pointer</div>
            </div>
            <div class="step-content">
              Use when you need to <strong>maintain order</strong> of certain elements (like move zeros). 
              One pointer scans, another tracks write position.
            </div>
          </div>

          <div class="step-box" style="border-left-color: var(--accent-orange);">
            <div class="step-header">
              <div class="step-number" style="background: var(--accent-orange);">‚ö°</div>
              <div class="step-title">Two-Pointer (Both Ends)</div>
            </div>
            <div class="step-content">
              Use when <strong>order doesn't matter</strong> within groups (like segregate 0s/1s). 
              Swap elements from opposite ends until pointers meet.
            </div>
          </div>

          <div class="step-box" style="border-left-color: var(--accent-purple);">
            <div class="step-header">
              <div class="step-number" style="background: var(--accent-purple);">üîÑ</div>
              <div class="step-title">Reverse Sections</div>
            </div>
            <div class="step-content">
              Use for <strong>rotation problems</strong>. Reversing different sections of array 
              achieves rotation without extra space.
            </div>
          </div>
        </div>

        <div class="key-points" style="border-color: rgba(239, 68, 68, 0.2); background: rgba(239, 68, 68, 0.05);">
          <h3 style="color: var(--accent-red);">‚ö†Ô∏è Common Mistakes to Avoid</h3>
          <ul>
            <li>Forgetting to handle edge cases (empty array, k=0, k>n)</li>
            <li>Using extra O(n) space when in-place solution exists</li>
            <li>Not preserving order when required (move zeros needs order)</li>
            <li>Off-by-one errors in pointer boundaries</li>
            <li>Not normalizing k in rotation (k % n)</li>
          </ul>
        </div>

        <div class="section" style="margin-top: 30px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));">
          <h3 style="font-size: 1.2rem; margin-bottom: 15px; color: var(--accent-blue);">üöÄ Interview Tips</h3>
          <ul style="margin-left: 25px; color: var(--text-secondary); line-height: 2;">
            <li>Always ask: "Should I maintain relative order?"</li>
            <li>Clarify: "Can I use extra space?" (often answer is no)</li>
            <li>State time and space complexity before coding</li>
            <li>Test edge cases: empty array, single element, all same</li>
            <li>Walk through example before writing code</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Tab Management
    function switchTab(index) {
      document.querySelectorAll('.tab').forEach((tab, i) => {
        tab.classList.toggle('active', i === index);
      });
      document.querySelectorAll('.tab-content').forEach((content, i) => {
        content.classList.toggle('active', i === index);
      });
    }

    // ==========================================
    // PROBLEM 1: MOVE ZEROS - STEP BY STEP
    // ==========================================
    let zerosArray = [0, 1, 0, 3, 12];
    let zerosSteps = [];
    let zerosCurrentStep = 0;
    let zerosPlaying = false;
    let zerosInterval = null;
    let zerosSpeed = 1000;

    function generateZerosSteps() {
      const arr = [...zerosArray];
      const n = arr.length;
      const steps = [];
      let writePos = 0;
      let operations = 0;
      let comparisons = 0;
      let assignments = 0;
      let arrayAccess = 0;

      // Initial state
      steps.push({
        arr: [...arr],
        writePos: 0,
        scanPos: -1,
        message: "Starting: writePos tracks where to place next non-zero element",
        action: 'init',
        operations: 0,
        comparisons: 0,
        assignments: 0,
        arrayAccess: 0
      });

      // Scan through array
      for (let i = 0; i < n; i++) {
        arrayAccess++;
        comparisons++;
        
        if (arr[i] !== 0) {
          steps.push({
            arr: [...arr],
            writePos: writePos,
            scanPos: i,
            message: `Found non-zero element ${arr[i]} at index ${i}. Placing at writePos ${writePos}`,
            action: 'found',
            operations: operations + comparisons + arrayAccess,
            comparisons: comparisons,
            assignments: assignments,
            arrayAccess: arrayAccess
          });

          arrayAccess++;
          assignments++;
          arr[writePos] = arr[i];
          writePos++;
          operations = comparisons + assignments + arrayAccess;

          steps.push({
            arr: [...arr],
            writePos: writePos,
            scanPos: i,
            message: `Placed ${arr[i]} at position ${writePos - 1}. WritePos now at ${writePos}`,
            action: 'placed',
            operations: operations,
            comparisons: comparisons,
            assignments: assignments,
            arrayAccess: arrayAccess
          });
        } else {
          operations = comparisons + assignments + arrayAccess;
          steps.push({
            arr: [...arr],
            writePos: writePos,
            scanPos: i,
            message: `Skipping zero at index ${i}`,
            action: 'skip',
            operations: operations,
            comparisons: comparisons,
            assignments: assignments,
            arrayAccess: arrayAccess
          });
        }
      }

      // Fill remaining with zeros
      while (writePos < n) {
        comparisons++;
        assignments++;
        arrayAccess++;
        arr[writePos] = 0;
        writePos++;
        operations = comparisons + assignments + arrayAccess;
        
        steps.push({
          arr: [...arr],
          writePos: writePos,
          scanPos: -1,
          message: `Filling position ${writePos - 1} with 0`,
          action: 'fill',
          operations: operations,
          comparisons: comparisons,
          assignments: assignments,
          arrayAccess: arrayAccess
        });
      }

      steps.push({
        arr: [...arr],
        writePos: writePos,
        scanPos: -1,
        message: "‚úÖ Complete! All zeros moved to end, non-zero order preserved.",
        action: 'complete',
        operations: operations,
        comparisons: comparisons,
        assignments: assignments,
        arrayAccess: arrayAccess
      });

      return steps;
    }

    function renderZerosStep(step) {
      const afterDiv = document.getElementById('afterZeros');
      afterDiv.innerHTML = '';
      
      step.arr.forEach((val, idx) => {
        const item = document.createElement('div');
        item.className = 'array-item' + (val === 0 ? ' zero' : '');
        
        // Add pointer labels
        if (idx === step.writePos && step.action !== 'complete') {
          item.classList.add('write-pos');
          const label = document.createElement('div');
          label.className = 'pointer-label write-ptr';
          label.textContent = 'write';
          item.appendChild(label);
        }
        if (idx === step.scanPos) {
          item.classList.add('active');
        }
        
        item.innerHTML += `<div class="index">${idx}</div>${val}`;
        afterDiv.appendChild(item);
      });

      document.getElementById('statusZeros').textContent = step.message;
      document.getElementById('statusZeros').className = 'status-message' + 
        (step.action === 'complete' ? ' success' : '');
      
      // Update complexity metrics
      document.getElementById('zerosN').textContent = zerosArray.length;
      document.getElementById('zerosOps').textContent = step.operations || 0;
      document.getElementById('zerosArrayAccess').textContent = step.arrayAccess || 0;
      document.getElementById('zerosComparisons').textContent = step.comparisons || 0;
      document.getElementById('zerosAssignments').textContent = step.assignments || 0;
    }

    function nextStepZeros() {
      if (zerosCurrentStep < zerosSteps.length - 1) {
        zerosCurrentStep++;
        renderZerosStep(zerosSteps[zerosCurrentStep]);
        updateZerosButtons();
        
        // Stop auto-play if reached end
        if (zerosCurrentStep === zerosSteps.length - 1) {
          stopPlayZeros();
        }
      }
    }

    function prevStepZeros() {
      if (zerosCurrentStep > 0) {
        zerosCurrentStep--;
        renderZerosStep(zerosSteps[zerosCurrentStep]);
        updateZerosButtons();
      }
    }

    function togglePlayZeros() {
      if (zerosPlaying) {
        stopPlayZeros();
      } else {
        startPlayZeros();
      }
    }

    function startPlayZeros() {
      zerosPlaying = true;
      document.getElementById('playZeros').innerHTML = '‚è∏Ô∏è Pause';
      document.getElementById('playZeros').classList.add('playing');
      
      zerosInterval = setInterval(() => {
        if (zerosCurrentStep < zerosSteps.length - 1) {
          nextStepZeros();
        } else {
          stopPlayZeros();
        }
      }, zerosSpeed);
    }

    function stopPlayZeros() {
      zerosPlaying = false;
      clearInterval(zerosInterval);
      document.getElementById('playZeros').innerHTML = '‚ñ∂Ô∏è Start Auto';
      document.getElementById('playZeros').classList.remove('playing');
    }

    function updateSpeedZeros() {
      zerosSpeed = parseInt(document.getElementById('speedZeros').value);
      if (zerosPlaying) {
        stopPlayZeros();
        startPlayZeros();
      }
    }

    function updateZerosButtons() {
      document.getElementById('prevZeros').disabled = zerosCurrentStep === 0;
      document.getElementById('nextZeros').disabled = zerosCurrentStep === zerosSteps.length - 1;
      document.getElementById('stepInfoZeros').textContent = 
        `Step ${zerosCurrentStep + 1} of ${zerosSteps.length}`;
    }

    function setCustomArray1() {
      const input = document.getElementById('zerosInput').value;
      zerosArray = input.split(',').map(x => parseInt(x.trim()));
      resetMoveZeros();
    }

    function resetMoveZeros() {
      stopPlayZeros();
      zerosSteps = generateZerosSteps();
      zerosCurrentStep = 0;
      
      const beforeDiv = document.getElementById('beforeZeros');
      beforeDiv.innerHTML = '';
      zerosArray.forEach((val, idx) => {
        const item = document.createElement('div');
        item.className = 'array-item' + (val === 0 ? ' zero' : '');
        item.innerHTML = `<div class="index">${idx}</div>${val}`;
        beforeDiv.appendChild(item);
      });
      
      renderZerosStep(zerosSteps[0]);
      updateZerosButtons();
    }

    // ==========================================
    // PROBLEM 2: SEGREGATE 0s/1s - STEP BY STEP
    // ==========================================
    let segregateArray = [0, 1, 1, 0, 1, 0, 0, 1];
    let segregateSteps = [];
    let segregateCurrentStep = 0;
    let segregatePlaying = false;
    let segregateInterval = null;
    let segregateSpeed = 1000;

    function generateSegregateSteps() {
      const arr = [...segregateArray];
      const n = arr.length;
      const steps = [];
      let left = 0, right = n - 1;
      let leftMoves = 0, rightMoves = 0, swaps = 0, comparisons = 0;

      steps.push({
        arr: [...arr],
        left: 0,
        right: n - 1,
        message: "Starting: Left pointer at start, right pointer at end",
        action: 'init',
        leftMoves: 0,
        rightMoves: 0,
        swaps: 0,
        comparisons: 0
      });

      while (left < right) {
        // Move left to find 1
        while (arr[left] === 0 && left < right) {
          comparisons++;
          leftMoves++;
          steps.push({
            arr: [...arr],
            left: left,
            right: right,
            message: `Left pointer at ${left} has 0 (correct position). Moving right...`,
            action: 'move-left',
            leftMoves: leftMoves,
            rightMoves: rightMoves,
            swaps: swaps,
            comparisons: comparisons
          });
          left++;
        }
        comparisons++; // Final comparison that breaks the loop

        // Move right to find 0
        while (arr[right] === 1 && left < right) {
          comparisons++;
          rightMoves++;
          steps.push({
            arr: [...arr],
            left: left,
            right: right,
            message: `Right pointer at ${right} has 1 (correct position). Moving left...`,
            action: 'move-right',
            leftMoves: leftMoves,
            rightMoves: rightMoves,
            swaps: swaps,
            comparisons: comparisons
          });
          right--;
        }
        comparisons++; // Final comparison that breaks the loop

        // Swap if needed
        if (left < right) {
          comparisons++;
          steps.push({
            arr: [...arr],
            left: left,
            right: right,
            message: `Found 1 at position ${left} and 0 at position ${right}. Need to swap!`,
            action: 'swap-ready',
            leftMoves: leftMoves,
            rightMoves: rightMoves,
            swaps: swaps,
            comparisons: comparisons
          });

          [arr[left], arr[right]] = [arr[right], arr[left]];
          swaps++;
          
          steps.push({
            arr: [...arr],
            left: left,
            right: right,
            message: `Swapped! Now arr[${left}]=0, arr[${right}]=1. Moving both pointers.`,
            action: 'swapped',
            leftMoves: leftMoves,
            rightMoves: rightMoves,
            swaps: swaps,
            comparisons: comparisons
          });

          left++;
          right--;
          leftMoves++;
          rightMoves++;
        }
      }

      steps.push({
        arr: [...arr],
        left: left,
        right: right,
        message: "‚úÖ Complete! All 0s on left, all 1s on right.",
        action: 'complete',
        leftMoves: leftMoves,
        rightMoves: rightMoves,
        swaps: swaps,
        comparisons: comparisons
      });

      return steps;
    }

    function renderSegregateStep(step) {
      const afterDiv = document.getElementById('afterSegregate');
      afterDiv.innerHTML = '';
      
      step.arr.forEach((val, idx) => {
        const item = document.createElement('div');
        item.className = 'array-item' + (val === 0 ? ' zero' : ' one');
        
        if (idx === step.left && step.action !== 'complete') {
          item.classList.add('pointer-left');
          const label = document.createElement('div');
          label.className = 'pointer-label left-ptr';
          label.textContent = 'L';
          item.appendChild(label);
        }
        if (idx === step.right && step.action !== 'complete') {
          item.classList.add('pointer-right');
          const label = document.createElement('div');
          label.className = 'pointer-label right-ptr';
          label.textContent = 'R';
          item.appendChild(label);
        }
        
        item.innerHTML += `<div class="index">${idx}</div>${val}`;
        afterDiv.appendChild(item);
      });

      document.getElementById('statusSegregate').textContent = step.message;
      document.getElementById('statusSegregate').className = 'status-message' + 
        (step.action === 'complete' ? ' success' : '');
      
      // Update complexity metrics
      document.getElementById('segregateN').textContent = segregateArray.length;
      document.getElementById('segregateMoves').textContent = (step.leftMoves || 0) + (step.rightMoves || 0);
      document.getElementById('segregateSwaps').textContent = step.swaps || 0;
      document.getElementById('segregateLeftMoves').textContent = step.leftMoves || 0;
      document.getElementById('segregateRightMoves').textContent = step.rightMoves || 0;
      document.getElementById('segregateComparisons').textContent = step.comparisons || 0;
    }

    function nextStepSegregate() {
      if (segregateCurrentStep < segregateSteps.length - 1) {
        segregateCurrentStep++;
        renderSegregateStep(segregateSteps[segregateCurrentStep]);
        updateSegregateButtons();
        
        if (segregateCurrentStep === segregateSteps.length - 1) {
          stopPlaySegregate();
        }
      }
    }

    function prevStepSegregate() {
      if (segregateCurrentStep > 0) {
        segregateCurrentStep--;
        renderSegregateStep(segregateSteps[segregateCurrentStep]);
        updateSegregateButtons();
      }
    }

    function togglePlaySegregate() {
      if (segregatePlaying) {
        stopPlaySegregate();
      } else {
        startPlaySegregate();
      }
    }

    function startPlaySegregate() {
      segregatePlaying = true;
      document.getElementById('playSegregate').innerHTML = '‚è∏Ô∏è Pause';
      document.getElementById('playSegregate').classList.add('playing');
      
      segregateInterval = setInterval(() => {
        if (segregateCurrentStep < segregateSteps.length - 1) {
          nextStepSegregate();
        } else {
          stopPlaySegregate();
        }
      }, segregateSpeed);
    }

    function stopPlaySegregate() {
      segregatePlaying = false;
      clearInterval(segregateInterval);
      document.getElementById('playSegregate').innerHTML = '‚ñ∂Ô∏è Start Auto';
      document.getElementById('playSegregate').classList.remove('playing');
    }

    function updateSpeedSegregate() {
      segregateSpeed = parseInt(document.getElementById('speedSegregate').value);
      if (segregatePlaying) {
        stopPlaySegregate();
        startPlaySegregate();
      }
    }

    function updateSegregateButtons() {
      document.getElementById('prevSegregate').disabled = segregateCurrentStep === 0;
      document.getElementById('nextSegregate').disabled = segregateCurrentStep === segregateSteps.length - 1;
      document.getElementById('stepInfoSegregate').textContent = 
        `Step ${segregateCurrentStep + 1} of ${segregateSteps.length}`;
    }

    function setCustomArray2() {
      const input = document.getElementById('segregateInput').value;
      segregateArray = input.split(',').map(x => parseInt(x.trim()));
      resetSegregate();
    }

    function resetSegregate() {
      stopPlaySegregate();
      segregateSteps = generateSegregateSteps();
      segregateCurrentStep = 0;
      
      const beforeDiv = document.getElementById('beforeSegregate');
      beforeDiv.innerHTML = '';
      segregateArray.forEach((val, idx) => {
        const item = document.createElement('div');
        item.className = 'array-item' + (val === 0 ? ' zero' : ' one');
        item.innerHTML = `<div class="index">${idx}</div>${val}`;
        beforeDiv.appendChild(item);
      });
      
      renderSegregateStep(segregateSteps[0]);
      updateSegregateButtons();
    }

    // ==========================================
    // PROBLEM 3: ROTATE ARRAY - STEP BY STEP
    // ==========================================
    let rotateArray = [1, 2, 3, 4, 5, 6, 7];
    let k = 3;
    let rotateSteps = [];
    let rotateCurrentStep = 0;
    let rotatePlaying = false;
    let rotateInterval = null;
    let rotateSpeed = 1000;

    function generateRotateSteps() {
      const arr = [...rotateArray];
      const n = arr.length;
      const normalizedK = k % n;
      const steps = [];

      steps.push({
        arr: [...arr],
        message: `Original array. Will rotate right by k=${k} (normalized: ${normalizedK})`,
        action: 'init',
        highlight: []
      });

      // Step 1: Reverse entire array
      const temp1 = [...arr];
      reverse(temp1, 0, n - 1);
      steps.push({
        arr: [...temp1],
        message: `Step 1: Reversed entire array [0 to ${n-1}] ‚Üí [${temp1.join(', ')}]`,
        action: 'reverse-all',
        highlight: Array.from({length: n}, (_, i) => i)
      });

      // Step 2: Reverse first k
      const temp2 = [...temp1];
      reverse(temp2, 0, normalizedK - 1);
      steps.push({
        arr: [...temp2],
        message: `Step 2: Reversed first ${normalizedK} elements [0 to ${normalizedK-1}] ‚Üí [${temp2.join(', ')}]`,
        action: 'reverse-first',
        highlight: Array.from({length: normalizedK}, (_, i) => i)
      });

      // Step 3: Reverse remaining
      const temp3 = [...temp2];
      reverse(temp3, normalizedK, n - 1);
      steps.push({
        arr: [...temp3],
        message: `Step 3: Reversed remaining elements [${normalizedK} to ${n-1}] ‚Üí [${temp3.join(', ')}]`,
        action: 'reverse-last',
        highlight: Array.from({length: n - normalizedK}, (_, i) => i + normalizedK)
      });

      steps.push({
        arr: [...temp3],
        message: `‚úÖ Complete! Array rotated right by ${normalizedK} positions.`,
        action: 'complete',
        highlight: []
      });

      return steps;
    }

    function reverse(arr, start, end) {
      while (start < end) {
        [arr[start], arr[end]] = [arr[end], arr[start]];
        start++;
        end--;
      }
    }

    function renderRotateStep(step) {
      const afterDiv = document.getElementById('afterRotate');
      afterDiv.innerHTML = '';
      
      step.arr.forEach((val, idx) => {
        const item = document.createElement('div');
        const originalIdx = rotateArray.indexOf(val);
        item.className = 'array-item';
        item.style.background = `hsl(${originalIdx * 50}, 70%, 50%)`;
        item.style.borderColor = `hsl(${originalIdx * 50}, 70%, 60%)`;
        
        if (step.highlight.includes(idx)) {
          item.classList.add('active');
        }
        
        item.innerHTML = `<div class="index">${idx}</div>${val}`;
        afterDiv.appendChild(item);
      });

      document.getElementById('statusRotate').textContent = step.message;
      document.getElementById('statusRotate').className = 'status-message' + 
        (step.action === 'complete' ? ' success' : '');
      
      // Update complexity metrics
      const normalizedK = k % rotateArray.length;
      document.getElementById('rotateN').textContent = rotateArray.length;
      document.getElementById('rotateK').textContent = normalizedK;
      
      // Calculate approximate swaps based on step
      let totalSwaps = 0;
      if (rotateCurrentStep >= 2) totalSwaps += Math.floor(rotateArray.length / 2);
      if (rotateCurrentStep >= 3) totalSwaps += Math.floor(normalizedK / 2);
      if (rotateCurrentStep >= 4) totalSwaps += Math.floor((rotateArray.length - normalizedK) / 2);
      document.getElementById('rotateSwaps').textContent = totalSwaps;
    }

    function nextStepRotate() {
      if (rotateCurrentStep < rotateSteps.length - 1) {
        rotateCurrentStep++;
        renderRotateStep(rotateSteps[rotateCurrentStep]);
        updateRotateButtons();
        
        if (rotateCurrentStep === rotateSteps.length - 1) {
          stopPlayRotate();
        }
      }
    }

    function prevStepRotate() {
      if (rotateCurrentStep > 0) {
        rotateCurrentStep--;
        renderRotateStep(rotateSteps[rotateCurrentStep]);
        updateRotateButtons();
      }
    }

    function togglePlayRotate() {
      if (rotatePlaying) {
        stopPlayRotate();
      } else {
        startPlayRotate();
      }
    }

    function startPlayRotate() {
      rotatePlaying = true;
      document.getElementById('playRotate').innerHTML = '‚è∏Ô∏è Pause';
      document.getElementById('playRotate').classList.add('playing');
      
      rotateInterval = setInterval(() => {
        if (rotateCurrentStep < rotateSteps.length - 1) {
          nextStepRotate();
        } else {
          stopPlayRotate();
        }
      }, rotateSpeed);
    }

    function stopPlayRotate() {
      rotatePlaying = false;
      clearInterval(rotateInterval);
      document.getElementById('playRotate').innerHTML = '‚ñ∂Ô∏è Start Auto';
      document.getElementById('playRotate').classList.remove('playing');
    }

    function updateSpeedRotate() {
      rotateSpeed = parseInt(document.getElementById('speedRotate').value);
      if (rotatePlaying) {
        stopPlayRotate();
        startPlayRotate();
      }
    }

    function updateRotateButtons() {
      document.getElementById('prevRotate').disabled = rotateCurrentStep === 0;
      document.getElementById('nextRotate').disabled = rotateCurrentStep === rotateSteps.length - 1;
      document.getElementById('stepInfoRotate').textContent = 
        `Step ${rotateCurrentStep + 1} of ${rotateSteps.length}`;
    }

    function setCustomArray3() {
      const input = document.getElementById('rotateInput').value;
      rotateArray = input.split(',').map(x => parseInt(x.trim()));
      k = parseInt(document.getElementById('kInput').value);
      document.getElementById('kDisplay').textContent = k;
      resetRotate();
    }

    function resetRotate() {
      stopPlayRotate();
      rotateSteps = generateRotateSteps();
      rotateCurrentStep = 0;
      
      const beforeDiv = document.getElementById('beforeRotate');
      beforeDiv.innerHTML = '';
      rotateArray.forEach((val, idx) => {
        const item = document.createElement('div');
        item.className = 'array-item';
        item.style.background = `hsl(${idx * 50}, 70%, 50%)`;
        item.style.borderColor = `hsl(${idx * 50}, 70%, 60%)`;
        item.innerHTML = `<div class="index">${idx}</div>${val}`;
        beforeDiv.appendChild(item);
      });
      
      renderRotateStep(rotateSteps[0]);
      updateRotateButtons();
    }

    // Initialize all on load
    window.addEventListener('load', () => {
      resetMoveZeros();
      resetSegregate();
      resetRotate();
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      const activeTab = document.querySelector('.tab.active');
      const tabIndex = Array.from(document.querySelectorAll('.tab')).indexOf(activeTab);
      
      if (e.key === 'ArrowRight') {
        if (tabIndex === 1) nextStepZeros();
        else if (tabIndex === 2) nextStepSegregate();
        else if (tabIndex === 3) nextStepRotate();
      } else if (e.key === 'ArrowLeft') {
        if (tabIndex === 1) prevStepZeros();
        else if (tabIndex === 2) prevStepSegregate();
        else if (tabIndex === 3) prevStepRotate();
      } else if (e.key === ' ' || e.key === 'Enter') {
        e.preventDefault();
        if (tabIndex === 1) togglePlayZeros();
        else if (tabIndex === 2) togglePlaySegregate();
        else if (tabIndex === 3) togglePlayRotate();
      }
    });

    // Stop all animations when switching tabs
    const originalSwitchTab = switchTab;
    switchTab = function(index) {
      stopPlayZeros();
      stopPlaySegregate();
      stopPlayRotate();
      originalSwitchTab(index);
    };
  </script>
</body>
</html>